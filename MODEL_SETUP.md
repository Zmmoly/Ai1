# ๐ค ุฏููู ุงุณุชุฎุฏุงู ุงููููุฐุฌ - ูููุฐุฌ ุงูุฃุญุฑู ุงูุนุฑุจูุฉ

## โ ุงูุฅุนุฏุงุฏุงุช ุงูุญุงููุฉ

### 1. ุงูููุฑุฏุงุช (Vocabulary)
```
ุงูููุงู: app/src/main/assets/vocabulary.txt

ุงููุญุชูู (33 ุญุฑู):
[" ", "ุฃ", "ุจ", "ุช", "ุซ", "ุฌ", "ุญ", "ุฎ", "ุฏ", "ุฐ", 
 "ุฑ", "ุฒ", "ุณ", "ุด", "ุต", "ุถ", "ุท", "ุธ", "ุน", "ุบ", 
 "ู", "ู", "ู", "ู", "ู", "ู", "ูู", "ู", "ู", 
 "ุฉ", "ู", "ุฆ", "ุก"]

โ ุชู ุงูุชุญุฏูุซ!
```

---

## ๐ ุงููููุฐุฌ

### ุงุณู ุงูููู - ุฃู ุงุณู ูุนูู! โ
```
ุฃูุซูุฉ ุตุญูุญุฉ:
โ speech_model.tflite
โ my_model.tflite
โ arabic_asr.tflite
โ model_v1.tflite
โ ุฃู_ุงุณู.tflite

ุงูููุฏ ูุฏุนู ุฃู ุงุณู!
```

### ููู ุชุญุฏุฏ ุงูุงุณู:
```kotlin
// ูู MainActivity.ktุ ุฏุงูุฉ setupSpeechRecognizer()
// ุงูุณุทุฑ ~412

// ุงูุทุฑููุฉ 1: ุงุณุชุฎุฏุงู ุงูุงุณู ุงูุงูุชุฑุงุถู
speechRecognizer.loadModel() 
// ูุจุญุซ ุนู: speech_model.tflite

// ุงูุทุฑููุฉ 2: ุชุญุฏูุฏ ุงุณู ูุฎุตุต
speechRecognizer.loadModel("my_model.tflite")
speechRecognizer.loadModel("arabic_asr.tflite")
```

---

## ๐ง ููุงุตูุงุช ุงููููุฐุฌ ุงููุชููุนุฉ

### Input (ุงูุฏุฎู):
```
Type: Float32
Shape: [1, 16000]
  - 16000 = sample_rate * duration
  - 1 second at 16kHz

Format: Normalized audio
  - Range: -1.0 to 1.0
  - Mono channel
  - PCM 16-bit converted to float
```

### Output (ุงููุฎุฑุฌ):
```
Type: Float32
Shape: [time_steps, vocab_size]
  - time_steps: ุนุฏุฏ ุงูุฎุทูุงุช ุงูุฒูููุฉ
  - vocab_size: 33 (ุนุฏุฏ ุงูุฃุญุฑู)

Format: Probabilities
  - ูู time_step ูุญุชูู ุนูู ุงุญุชูุงููุงุช ููู 33 ุญุฑู
  - ูุณุชุฎุฏู CTC Decoding ูุชุญููููุง ููุต
```

---

## ๐ฏ ููู ูุนูู CTC Decoding

### ุงููุจุฏุฃ:
```
ุงููููุฐุฌ ููุฎุฑุฌ ุงุญุชูุงููุงุช ููู ุญุฑู ูู ูู ุฎุทูุฉ ุฒูููุฉ

ูุซุงู:
Time 0: [0.9, 0.01, 0.01, ...] โ blank (ูุณุงูุฉ)
Time 1: [0.01, 0.85, 0.01, ...] โ ุฃ
Time 2: [0.01, 0.90, 0.01, ...] โ ุฃ (ููุณ ุงูุญุฑู - ูุชุฌุงูู)
Time 3: [0.01, 0.01, 0.88, ...] โ ุจ
Time 4: [0.9, 0.01, 0.01, ...] โ blank
Time 5: [0.01, 0.85, 0.01, ...] โ ุฃ

ุงููุชูุฌุฉ ุงูููุงุฆูุฉ: "ุฃุจุง"
```

### ุงูููุงุนุฏ:
```
1. ุงูููุฑุณ 0 = blank (ูุณุงูุฉ/ูุงุตู)
2. ูุง ููุฑุฑ ููุณ ุงูุญุฑู ูุชุชุงููุงู
3. ูุชุฌุงูู ุงูู blank ุจูู ุงูุฃุญุฑู
```

---

## ๐ ุฃูุซูุฉ ุงูุชุดุบูู

### ูุซุงู 1: ุงุณุชุฎุฏุงู ุงูุงุณู ุงูุงูุชุฑุงุถู
```kotlin
// 1. ุถุน ุงููููุฐุฌ ูู assets/
app/src/main/assets/speech_model.tflite

// 2. ุงูููุฏ ูุนูู ุชููุงุฆูุงู
speechRecognizer.loadModel()
// ูุญูู: speech_model.tflite
```

### ูุซุงู 2: ุงุณุชุฎุฏุงู ุงุณู ูุฎุตุต
```kotlin
// 1. ุถุน ุงููููุฐุฌ ุจุฃู ุงุณู
app/src/main/assets/arabic_v2.tflite

// 2. ูู MainActivity.kt
private fun setupSpeechRecognizer() {
    speechRecognizer.loadModel("arabic_v2.tflite") // โ
    // ...
}
```

### ูุซุงู 3: ุชุฌุฑุจุฉ ุนุฏุฉ ููุงุฐุฌ
```kotlin
// ูุฏูู ุนุฏุฉ ููุงุฐุฌ:
assets/
  โโ model_fast.tflite
  โโ model_accurate.tflite
  โโ model_small.tflite

// ููููู ุงูุชุจุฏูู:
speechRecognizer.loadModel("model_fast.tflite")
// ุฃู
speechRecognizer.loadModel("model_accurate.tflite")
```

---

## ๐ ุงูุชุญูู ูู ุงููููุฐุฌ

### 1. ูุญุต ุงูู Input Shape:
```python
# ูู Python/TensorFlow
import tensorflow as tf

model = tf.lite.Interpreter("model.tflite")
model.allocate_tensors()

input_details = model.get_input_details()
print("Input shape:", input_details[0]['shape'])
# ูุฌุจ ุฃู ูููู: [1, 16000] ุฃู ูุฑูุจ ูู ุฐูู
```

### 2. ูุญุต ุงูู Output Shape:
```python
output_details = model.get_output_details()
print("Output shape:", output_details[0]['shape'])
# ูุฌุจ ุฃู ูููู: [time_steps, 33] ุฃู [1, time_steps, 33]
```

### 3. ุฅุฐุง ูุงู ุงูุดูู ูุฎุชูู:
```kotlin
// ูู SpeechRecognizer.kt

// ุนุฏูู ุญุฌู ุงูุฏุฎู (ุงูุณุทุฑ 24)
private val inputSize = 32000 // 2 ุซุงููุฉ ุจุฏูุงู ูู 1

// ุนุฏูู ุญุฌู ุงููุฎุฑุฌ (ุงูุณุทุฑ 210)
val outputBuffer = Array(1) { FloatArray(2000) } // ุญุณุจ ูููุฐุฌู
```

---

## โ๏ธ ุงูุชุฎุตูุต ุงููุชูุฏู

### ุชุบููุฑ ูุฏุฉ ุงูุชุณุฌูู:
```kotlin
// ูู SpeechRecognizer.ktุ ุงูุณุทุฑ 154

// ุงูุญุงูู: ูุนุงูุฌุฉ ูู 2 ุซุงููุฉ
if (audioData.size >= sampleRate * 2) {

// ูุชุบููุฑ ุฅูู 1 ุซุงููุฉ:
if (audioData.size >= sampleRate * 1) {

// ูุชุบููุฑ ุฅูู 3 ุซูุงูู:
if (audioData.size >= sampleRate * 3) {
```

### ุชุญุณูู ุงูุฏูุฉ:
```kotlin
// ูู ctcDecode()ุ ุฅุถุงูุฉ ุนุชุจุฉ ุงุญุชูุงู

if (maxIdx != 0 && maxIdx != lastChar && maxProb > 0.5f) {
    // ููุท ุฅุฐุง ูุงู ุงูุงุญุชูุงู ุฃูุซุฑ ูู 50%
    if (maxIdx < vocabulary.size) {
        result.append(vocabulary[maxIdx])
    }
}
```

### ุฅุถุงูุฉ ูุนุงูุฌุฉ ูุง ุจุนุฏ ุงููุต:
```kotlin
private fun postProcess(text: String): String {
    return text
        .replace("  ", " ")     // ุฅุฒุงูุฉ ุงููุณุงูุงุช ุงููุฒุฏูุฌุฉ
        .trim()                  // ุฅุฒุงูุฉ ุงููุณุงูุงุช ูู ุงูุฃุทุฑุงู
        .replace("ุฃุฃ", "ุข")      // ุชุตุญูุญุงุช ุจุณูุทุฉ
}
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ุจุฏูู ูููุฐุฌ:
```kotlin
// ูู processOutput()
// ุฃุถู ูู ุงูุจุฏุงูุฉ ููุงุฎุชุจุงุฑ:

private fun processOutput(output: Array<FloatArray>): String {
    // ููุงุฎุชุจุงุฑ ููุท - ุงุญุฐู ุจุนุฏ ุฅุถุงูุฉ ุงููููุฐุฌ
    return "ุงุฎุชุจุงุฑ - ุชู ุงูุชุนุฑู ุนูู ุงูุตูุช"
    
    // ุงูููุฏ ุงูุญูููู...
}
```

### 2. ุงุฎุชุจุงุฑ ูุน ุงููููุฐุฌ:
```kotlin
// ุฃุถู logs ููุชุญูู
Log.d(TAG, "Output shape: ${output[0].size}")
Log.d(TAG, "Vocabulary size: ${vocabulary.size}")
Log.d(TAG, "Time steps: ${probabilities.size / vocabulary.size}")
```

### 3. ูุญุต ุงููุชูุฌุฉ:
```
ุงููุณุชุฎุฏู: ๐ค "ุงูุชุญ ูุงุชุณุงุจ"

ุงูู Logs:
๐ ุงููุต ุงููุนุชุฑู ุจู: ุงูุชุญ ูุงุชุณุงุจ

ุญูู ุงูุฅุฏุฎุงู:
"ุงูุชุญ ูุงุชุณุงุจ"

Toast:
โ ุชู ุงูุชุนุฑู: ุงูุชุญ ูุงุชุณุงุจ
```

---

## ๐ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุงููุดููุฉ 1: ุงููุต ูุงุฑุบ
```
ุงูุณุจุจ: ุงููููุฐุฌ ููุฑุฌุน ุงุญุชูุงููุงุช ููุฎูุถุฉ
ุงูุญู: 
  1. ุชุญูู ูู ุฌูุฏุฉ ุงูุชุณุฌูู
  2. ููู ุนุชุจุฉ ุงูุงุญุชูุงู
  3. ุชุฃูุฏ ูู ููู ุงูููุฑุฏุงุช
```

### ุงููุดููุฉ 2: ุงููุต ูุดูู
```
ุงูุณุจุจ: CTC Decoding ุบูุฑ ุตุญูุญ
ุงูุญู:
  1. ุชุญูู ูู ุชุฑุชูุจ ุงูููุฑุฏุงุช
  2. ุชุฃูุฏ ูู shape ุงููุฎุฑุฌุงุช
  3. ุฑุงุฌุน ููุงุนุฏ CTC
```

### ุงููุดููุฉ 3: ุงููููุฐุฌ ูุง ููุญููู
```
ุงูุณุจุจ: ุงุณู ุงูููู ุฎุงุทุฆ ุฃู ุงูููู ุบูุฑ ููุฌูุฏ
ุงูุญู:
  1. ุชุญูู ูู ุงูุงุณู ูู loadModel()
  2. ุชุฃูุฏ ูู ูุฌูุฏ ุงูููู ูู assets/
  3. ุฑุงุฌุน ุงูู Logs
```

---

## โ ูุงุฆูุฉ ุงูุชุญูู

```
โ ุงููููุฐุฌ ููุฌูุฏ ูู app/src/main/assets/
โ vocabulary.txt ูุญุฏูุซ (33 ุญุฑู)
โ ุงูุงุณู ูุญุฏุฏ ูู setupSpeechRecognizer()
โ Input shape ูุทุงุจู (16000)
โ Output shape ูุทุงุจู (time_steps ร 33)
โ ุฅุฐู RECORD_AUDIO ููููุญ
โ ุงูููุฏ ูุญุฏูุซ
โ ุชู ุงูุงุฎุชุจุงุฑ
```

---

## ๐ ุงูุฎูุงุตุฉ

```
โ ุงููููุฐุฌ ูุฏุนู ุฃู ุงุณู ููู
โ ุงูููุฑุฏุงุช ูุญุฏุซุฉ ููุฃุญุฑู ุงูุนุฑุจูุฉ
โ CTC Decoding ููุทุจูู
โ ูุฏุนู ููุงุฐุฌ ุงูุฃุญุฑู (character-based)
โ ูุงุจู ููุชุฎุตูุต ุจุงููุงูู
โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู!
```

**ุถุน ูููุฐุฌู ูุงุจุฏุฃ!** ๐
